trait Reader a {
    -- Source type should be specified in each implementation of the Reader trait
    kind t = type -> type

    data Source a { s: t a; pos: (int*int*int) }

    sig next : self -> Option a * self for Source a
}

--{
    Example where `Source` is incarnated by a `List`
}

impl forall a. Reader a {
    type t = List

    def next =
        when self.s
        is Nil -> None, self
        is (::) -> Some self.head, (Source self.tail self.pos)
}